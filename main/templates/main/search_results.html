{% extends 'main/base.html' %}  <!-- Replace with your base template -->

{% block content %}
<style>
/* File link styling for original vs translated posts */
.original-file-link {
    color: #007bff; /* Blue for original posts */
    text-decoration: none;
    font-weight: bold;
}

.original-file-link:hover {
    color: #0056b3;
    text-decoration: underline;
}

.translated-file-link {
    color: #dc3545; /* Light red for translated posts */
    text-decoration: none;
    font-weight: bold;
}

.translated-file-link:hover {
    color: #c82333;
    text-decoration: underline;
}
</style>
<div class="container">
    <h2>نتائج البحث</h2>
    {% if results %}
            {% for post in results %}
            <div class="card mt-2">
              <div class="card-header d-flex justify-content-between align-items-center">
                <h5>
                  {{ post.title }}
                  {% if post.pdf %}
                  <p>
                    <a href="{{ post.pdf.url }}" target="_blank"><i class="fas fa-file-pdf"></i></a>
                  </p> 
                {% endif %} 
                </h5>
              </div>
                
              <div class="card-body">
                <h6 class="post-author">المؤلف: {{post.authors}}</h6>
                

                {% if post.translator %}
                <p class="post-translator">المترجم: {{ post.translator }}</p>
                {% endif %}
                <p class="post-keywords">التصنيف: {{ post.category }}</p>
                <p class="post-description" id="description-{{ post.id }}">
                  {{ post.description|truncatechars:200 }}
                  {% if post.description|length > 200 %}
                      <span class="more-text" style="display:none;">{{ post.description|slice:"200:" }}</span>
                      <button onclick="toggleDescription('description-{{ post.id }}')" class="see-more-btn">اقرأ المزيد</button>
                  {% endif %}
                </p>
                
                <p class="post-keywords">الكلمات المفتاحية: {{ post.keywords }}</p>
                {% if post.pdf %}
                  <p>
                    {% if post.translator %}
                      <a href="{{ post.pdf.url }}" target="_blank" class="translated-file-link">تصفح الملف</a>
                    {% else %}
                      <a href="{{ post.pdf.url }}" target="_blank" class="original-file-link">تصفح الملف</a>
                    {% endif %}
                  </p> 
                {% endif %}
              </div>
              <div class="card-footer text-muted">{{ post.created_at }}</div>
            </div>
                    
            
            {% endfor %}
      
    {% else %}
        <p>لم يتم العثور على نتائج</p>
    {% endif %}
</div>
<script>
  function toggleDescription(descriptionId) {
    var description = document.getElementById(descriptionId);
    var moreText = description.getElementsByClassName('more-text')[0];
  
    if (moreText.style.display === "none") {
        moreText.style.display = "inline";
    } else {
        moreText.style.display = "none";
    }
  }
  
  </script>
{% endblock %}
